{
  "name": "Daily Agent Hours Sync",
  "nodes": [
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "analysisDate",
              "name": "analysisDate",
              "value": "={{ $now.format('yyyy-MM-dd') }}",
              "type": "string"
            },
            {
              "id": "agents",
              "name": "agents",
              "value": "={{ $json.agents.map(agent => ({\n  FULL_NAME: agent.FULL_NAME,\n  HOURS_LOGGED: agent.HOURS_LOGGED,\n  FIRST_LOGIN: agent.FIRST_LOGIN,\n  LAST_LOGOUT: agent.LAST_LOGOUT\n})) }}",
              "type": "array"
            }
          ]
        },
        "options": {}
      },
      "id": "format-agent-hours-data",
      "name": "Format Agent Hours Data",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.3,
      "position": [800, 300],
      "notes": "Transforms incoming agent data into the required format with today's date"
    },
    {
      "parameters": {
        "url": "https://your-dashboard.vercel.app/api/agent-hours",
        "authentication": "none",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ {\n  \"analysisDate\": $json.analysisDate,\n  \"agents\": $json.agents\n} }}",
        "options": {}
      },
      "id": "post-to-dashboard",
      "name": "POST to Dashboard API",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [1020, 300],
      "notes": "Sends agent hours data to dashboard. Each day creates a new blob entry."
    }
  ],
  "connections": {
    "Format Agent Hours Data": {
      "main": [
        [
          {
            "node": "POST to Dashboard API",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {}
}

